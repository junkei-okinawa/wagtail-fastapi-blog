# Django + Wagtail + FastAPI Blog - é–‹ç™ºã‚¬ã‚¤ãƒ‰

## ğŸš€ é–‹ç™ºç’°å¢ƒã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—

### å‰ææ¡ä»¶
- Python 3.12+
- uv (Python package manager)
- Git

### åˆå›ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—
```bash
# 1. ãƒªãƒã‚¸ãƒˆãƒªã‚¯ãƒ­ãƒ¼ãƒ³
git clone <repository-url>
cd my-wagtail-fastapi-blog

# 2. ä¾å­˜é–¢ä¿‚ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
make install

# 3. Pre-commit hooksè¨­å®š
make setup-hooks

# 4. ç’°å¢ƒå¤‰æ•°è¨­å®š
cp .env.example .env
# .envãƒ•ã‚¡ã‚¤ãƒ«ã‚’ç·¨é›†ã—ã¦APIã‚­ãƒ¼ç­‰ã‚’è¨­å®š

# 5. ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—
make migrate
make createsuperuser

# 6. é–‹ç™ºã‚µãƒ¼ãƒãƒ¼èµ·å‹•
make dev
```

## ğŸ”§ Makeã‚³ãƒãƒ³ãƒ‰ä¸€è¦§

### **åŸºæœ¬ã‚³ãƒãƒ³ãƒ‰**
| ã‚³ãƒãƒ³ãƒ‰ | èª¬æ˜ |
|---------|------|
| `make help` | åˆ©ç”¨å¯èƒ½ãªã‚³ãƒãƒ³ãƒ‰ä¸€è¦§è¡¨ç¤º |
| `make install` | å…¨ä¾å­˜é–¢ä¿‚ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ« |
| `make dev` | é–‹ç™ºã‚µãƒ¼ãƒãƒ¼èµ·å‹• (http://localhost:8000) |

### **ãƒ†ã‚¹ãƒˆé–¢é€£**
| ã‚³ãƒãƒ³ãƒ‰ | èª¬æ˜ |
|---------|------|
| `make test` | å…¨ãƒ†ã‚¹ãƒˆå®Ÿè¡Œ |
| `make test-unit` | å˜ä½“ãƒ†ã‚¹ãƒˆã®ã¿å®Ÿè¡Œ |
| `make test-integration` | çµ±åˆãƒ†ã‚¹ãƒˆã®ã¿å®Ÿè¡Œ |
| `make test-coverage` | ã‚«ãƒãƒ¬ãƒƒã‚¸ä»˜ããƒ†ã‚¹ãƒˆå®Ÿè¡Œ |

### **ã‚³ãƒ¼ãƒ‰å“è³ª**
| ã‚³ãƒãƒ³ãƒ‰ | èª¬æ˜ |
|---------|------|
| `make lint` | ã‚³ãƒ¼ãƒ‰å“è³ªãƒã‚§ãƒƒã‚¯ (flake8, ruff) |
| `make format` | ã‚³ãƒ¼ãƒ‰ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆ (black, isort, ruff) |
| `make setup-hooks` | Pre-commit hooks ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ« |
| `make check-hooks` | Pre-commit hooks æ‰‹å‹•å®Ÿè¡Œ |

### **Djangoç®¡ç†**
| ã‚³ãƒãƒ³ãƒ‰ | èª¬æ˜ |
|---------|------|
| `make migrate` | ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ |
| `make createsuperuser` | ã‚¹ãƒ¼ãƒ‘ãƒ¼ãƒ¦ãƒ¼ã‚¶ãƒ¼ä½œæˆ |
| `make collectstatic` | é™çš„ãƒ•ã‚¡ã‚¤ãƒ«åé›† |
| `make shell` | Django shellèµ·å‹• |

### **é–‹ç™ºæ”¯æ´**
| ã‚³ãƒãƒ³ãƒ‰ | èª¬æ˜ |
|---------|------|
| `make clean` | ä¸€æ™‚ãƒ•ã‚¡ã‚¤ãƒ«å‰Šé™¤ |
| `make logs` | é–‹ç™ºã‚µãƒ¼ãƒãƒ¼ãƒ­ã‚°è¡¨ç¤º |

## ğŸ“ é–‹ç™ºãƒ•ãƒ­ãƒ¼

### **1. æ–°æ©Ÿèƒ½é–‹ç™º**
```bash
# ãƒ–ãƒ©ãƒ³ãƒä½œæˆ
git checkout -b feature/new-feature

# é–‹ç™ºç’°å¢ƒç¢ºèª
make dev

# ãƒ†ã‚¹ãƒˆå®Ÿè¡Œ
make test

# ã‚³ãƒ¼ãƒ‰å“è³ªãƒã‚§ãƒƒã‚¯
make lint
make format

# ã‚³ãƒŸãƒƒãƒˆï¼ˆpre-commitè‡ªå‹•å®Ÿè¡Œï¼‰
git add .
git commit -m "feat: æ–°æ©Ÿèƒ½å®Ÿè£…"
```

### **2. ãƒ—ãƒ«ãƒªã‚¯ã‚¨ã‚¹ãƒˆå‰ãƒã‚§ãƒƒã‚¯**
```bash
# å…¨ä½“ãƒã‚§ãƒƒã‚¯
make check-hooks
make test-coverage
make lint

# å•é¡Œãªã‘ã‚Œã°ãƒ—ãƒƒã‚·ãƒ¥
git push origin feature/new-feature
```

## ğŸ§ª ãƒ†ã‚¹ãƒˆæˆ¦ç•¥

### **ãƒ†ã‚¹ãƒˆãƒ•ã‚¡ã‚¤ãƒ«æ§‹æˆ**
```
tests/
â”œâ”€â”€ conftest.py              # ãƒ†ã‚¹ãƒˆè¨­å®šãƒ»fixtures
â”œâ”€â”€ unit/                    # å˜ä½“ãƒ†ã‚¹ãƒˆ
â”‚   â”œâ”€â”€ test_blog_models.py  # ãƒ–ãƒ­ã‚°ãƒ¢ãƒ‡ãƒ«ãƒ†ã‚¹ãƒˆ
â”‚   â”œâ”€â”€ test_posts_api.py    # æŠ•ç¨¿APIãƒ†ã‚¹ãƒˆ
â”‚   â””â”€â”€ test_payments_api.py # æ±ºæ¸ˆAPIãƒ†ã‚¹ãƒˆ
â””â”€â”€ integration/             # çµ±åˆãƒ†ã‚¹ãƒˆ
    â””â”€â”€ test_full_integration.py
```

### **ãƒ†ã‚¹ãƒˆå®Ÿè¡Œãƒ‘ã‚¿ãƒ¼ãƒ³**
```bash
# é–‹ç™ºä¸­ï¼ˆé«˜é€Ÿï¼‰
make test-unit

# æ©Ÿèƒ½å®Œæˆæ™‚ï¼ˆå®Œå…¨ï¼‰
make test

# ãƒªãƒªãƒ¼ã‚¹å‰ï¼ˆè©³ç´°ï¼‰
make test-coverage
```

## ğŸ”§ ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°

### **ã‚ˆãã‚ã‚‹å•é¡Œ**

**1. ä¾å­˜é–¢ä¿‚ã‚¨ãƒ©ãƒ¼**
```bash
# ä¾å­˜é–¢ä¿‚å†ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
uv sync --reinstall
```

**2. ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‚¨ãƒ©ãƒ¼**
```bash
# ãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³åˆæœŸåŒ–
rm db.sqlite3
make migrate
```

**3. é™çš„ãƒ•ã‚¡ã‚¤ãƒ«ã‚¨ãƒ©ãƒ¼**
```bash
# é™çš„ãƒ•ã‚¡ã‚¤ãƒ«å†åé›†
make collectstatic
```

**4. Pre-commitå¤±æ•—**
```bash
# ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆè‡ªå‹•ä¿®æ­£
make format
git add .
git commit
```

## ğŸ“Š é–‹ç™ºãƒ¡ãƒˆãƒªã‚¯ã‚¹

- **ãƒ†ã‚¹ãƒˆæˆåŠŸç‡**: ç›®æ¨™ 100%
- **ã‚³ãƒ¼ãƒ‰ã‚«ãƒãƒ¬ãƒƒã‚¸**: ç›®æ¨™ 80%+
- **ãƒ¬ã‚¹ãƒãƒ³ã‚¹æ™‚é–“**: ç›®æ¨™ <200ms
- **ã‚¨ãƒ©ãƒ¼ç‡**: ç›®æ¨™ <1%

## ğŸ”— é–¢é€£ãƒªãƒ³ã‚¯

- **é–‹ç™ºã‚µãƒ¼ãƒãƒ¼**: http://localhost:8000
- **Djangoç®¡ç†ç”»é¢**: http://localhost:8000/admin/
- **Wagtail CMS**: http://localhost:8000/cms/
- **APIä»•æ§˜æ›¸**: http://localhost:8000/docs
- **ãƒ†ã‚¹ãƒˆã‚«ãƒãƒ¬ãƒƒã‚¸**: ./htmlcov/index.html
